<!DOCTYPE html>
<html>
<head>
    <title>Convert JSON Data to HTML Table</title>
    <style>
        th, td, p, input {
            font:14px Verdana;
        }
        table, th, td 
        {
            border: solid 1px #DDD;
            border-collapse: collapse;
            padding: 2px 3px;
            text-align: center;
        }
        th {
            font-weight:bold;
        }
    </style>
    <script>

            function rowDelete(){
                var myBooks =document.getElementById('pass').value;
                 var myBooks1 = JSON.parse(myBooks);
                /*
                var index = null;
    for (var i =0; i < myArr.length; i++) {
        if (myArr[i].filename === fileName) {
            index = i;
            break;
        }
    }
    if (index !== null) {
        myArr.splice(index, 1);
    }
                
                */

                 var key=document.getElementById('key').value;
                 console.log(key);
                 for (var i = 0; i < myBooks1.length; i++) {
                        console.log(myBooks1[0].name);
                       if(myBooks1[i].name===key){
                        myBooks1.splice(i,1);
                        console.log(myBooks1);

                    }
                    else{
                        console.log("Not Working ");
                    }
                    }
                 }
                
    //             const id = req.params.restaurantId;
    // Restaurant.remove({_id:id  }).exec()
    // .then(result => {
    //     res.status(200).json({
    //         message: 'Product deleted ',
    //         request: {
    //             type : 'POST',
    //             url: 'http://localhost3000/restaurant',
    //             data :{
    //                 name: 'String',
    //                 cuisine: 'String'
    //             }
    //         }
    //     });
    // }).catch(err => {
    //     res.status(200).json({
    //         error:err
    //     });
       
    // }); 
    //         }
            function CreateTableFromJSON() {
                alert("sdfg")
                
                 var myBooks =document.getElementById('pass').value;
                 var myBooks1 = JSON.parse(myBooks);
                 console.log("json data fetched",myBooks[0])
        
                 console.log("json data fetched",myBooks1[0])
                // EXTRACT VALUE FOR HTML HEADER. 
                // dynamic deleting of nutrition values 
                var col = [];
                for (var i = 0; i < myBooks1.length; i++) {
                    for (var key in myBooks1[i]) {
                        if (col.indexOf(key) === -1) {
                            col.push(key);
                        }
                    }
                }
        
                // CREATE DYNAMIC TABLE.
                var table = document.createElement("table");
        
                // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.
        
                var tr = table.insertRow(-1);                   // TABLE ROW.
        
                for (var i = 0; i < col.length; i++) {
                    var th = document.createElement("th");      // TABLE HEADER.
                    th.innerHTML = col[i];
                    tr.appendChild(th);
                }
        
                // ADD JSON DATA TO THE TABLE AS ROWS.
                for (var i = 0; i < myBooks1.length; i++) {
        
                    tr = table.insertRow(-1);
        
                    for (var j = 0; j < col.length; j++) {
                        var tabCell = tr.insertCell(-1);
                        tabCell.innerHTML = myBooks1[i][col[j]];
                    }
                }
        
                // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
                var divContainer = document.getElementById("showData");
                divContainer.innerHTML = "";
                divContainer.appendChild(table);
            }
        </script>
        
</head>
<body>
    <button type="deleteBtn" onclick="rowDelete()"  class="btn btn-primary" >current Date</button>
    <input type="button" onclick="CreateTableFromJSON()" value="Create Table From JSON" />
    <p id="showData"></p>
    <input type="hidden" class="form-control" id="pass" name="pass" placeholder="" value="<%=jsp%>">
    <input type="text" class="form-control" id="key" name="pass" placeholder="key" value="">

    <!-- <p><%=jsp%></p> -->
    <table>
        <tbody>
            <%for(var i=0;i<jsondet.length;i++){%>
                <tr>
                    <td><%=jsondet[i].id%></td>
                    <td><%=jsondet[i].name%></td>
                    <td> latititude <%= jsondet[i].latitude%></td>


                </tr>
                <%}%>
            </tbody>
        </table>
</body>


</html>